// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from "./types";

// Use environment variables (ensure they are prefixed with VITE_ for Vite projects)
const supabaseUrl = import.meta.env.VITE_SUPABASE_URL;
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;

// Removed DEBUG logs

if (!supabaseUrl || !supabaseAnonKey) {
  // Error handling remains
  console.error("Supabase Client Init Error: URL or Anon Key is missing!"); 
  throw new Error("Supabase URL and Anon Key must be provided.");
}

let supabaseInstance;
try {
  supabaseInstance = createClient<Database>(supabaseUrl, supabaseAnonKey, {
    auth: {
      // Automatically refreshes the session
      autoRefreshToken: true,
      // Persists the session locally
      persistSession: true,
      // Detects session changes across tabs
      detectSessionInUrl: true, 
    },
  });
} catch (error) {
  console.error("Supabase Client Init Error: Failed during createClient call!", error);
  // Handle the error appropriately, maybe throw it again or set a dummy client
  throw error; // Re-throw to potentially stop execution if client creation is critical
}

export const supabase = supabaseInstance;
